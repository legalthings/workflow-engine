# This is a basic scenario where a user and an automated system interact.
#
# The HTTP GET request is initially done by the system, but can be invoked by
#   the user if it fails.
---

$schema: https://specs.letsflow.io/v0.3.0/scenario#
title: Basic system and user

actors:
  user:
    title: User
  system:
    $ref: https://specs.letsflow.io/v0.3.0/actor/organization#
    title: System

actions:
  step1:
    $schema: https://specs.letsflow.io/v0.3.0/action/http#
    title: Step1
    actors:
      - system
      - user
    method: GET
    url: https://www.example.com
  step2:
    $schema: https://specs.letsflow.io/v0.3.0/action/nop#
    title: Step2
    actor: system
    data: "Nam pretium turpis et arcu. Duis arcu tortor, ipsum."
  step3:
    $schema: https://specs.letsflow.io/v0.3.0/action#
    title: Step3
    actor: user

states:
  initial:
    transitions:
      - on: step1.ok
        goto: second
      - on: step1.error
        goto: "-"
  second:
    transitions:
      - on: step2.ok
        goto: third
      - on: step2.error
        goto: :failed
  third:
    on: step3
    goto: :success
